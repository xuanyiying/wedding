# =============================================================================
# 测试环境配置 (Test Environment)
# =============================================================================
# 创建时间: 2025-09-04
# 维护者: DevOps Team
# 描述: 测试环境配置，用于自动化测试和集成测试
# =============================================================================

# 环境标识
NODE_ENV=test
ENVIRONMENT=test
DEPLOY_ENV=test

# 服务器配置
SERVER_HOST=localhost
SERVER_PORT=3002
WEB_PORT=3001
API_BASE_URL=http://localhost:3002

# 数据库配置 (测试数据库)
MYSQL_HOST=mysql-test
MYSQL_PORT=3306
MYSQL_DATABASE=wedding_test
MYSQL_USER=wedding_test
MYSQL_PASSWORD=test_password_2025
MYSQL_ROOT_PASSWORD=root_test_2025

# 数据库连接配置
DB_HOST=mysql-test
DB_PORT=3306
DB_NAME=wedding_test
DB_USERNAME=wedding_test
DB_PASSWORD=test_password_2025
DATABASE_URL=mysql://wedding_test:test_password_2025@mysql-test:3306/wedding_test

# Redis配置
REDIS_HOST=redis-test
REDIS_PORT=6379
REDIS_PASSWORD=redis_test_2025

# MinIO配置
MINIO_ENDPOINT=minio-test
MINIO_PORT=9000
MINIO_ACCESS_KEY=test_minio_access
MINIO_SECRET_KEY=test_minio_secret_2025
MINIO_BUCKET=wedding-test
MINIO_PUBLIC_ENDPOINT=http://localhost:9002

# OSS配置 (统一配置)
OSS_TYPE=minio
OSS_ENDPOINT=http://minio-test:9000
OSS_REGION=us-east-1
OSS_ACCESS_KEY_ID=test_minio_access
OSS_ACCESS_KEY_SECRET=test_minio_secret_2025
OSS_ACCESS_KEY=test_minio_access
OSS_SECRET_KEY=test_minio_secret_2025
OSS_BUCKET=wedding-test
OSS_SECURE=false
OSS_CDN_BASE_URL=http://localhost:9002
CDN_BASE_URL=http://localhost:9002

# 安全配置
JWT_SECRET=test_jwt_secret_key_2025_wedding
JWT_REFRESH_SECRET=test_jwt_refresh_secret_key_2025_wedding
JWT_EXPIRES_IN=1h
CORS_ORIGIN=http://localhost:3001

# 邮件配置 (测试邮箱)
SMTP_HOST=smtp.ethereal.email
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=test@ethereal.email
SMTP_PASS=test_password
SMTP_FROM="Wedding Test <noreply@wedding-test.local>"

# 上传配置
UPLOAD_MAX_FILE_SIZE=10485760
UPLOAD_TIMEOUT=60000
UPLOAD_TIMEOUT_CUSTOMIZABLE=true
UPLOAD_MIN_TIMEOUT=5000
UPLOAD_MAX_TIMEOUT=300000
UPLOAD_RETRY_ATTEMPTS=2
UPLOAD_RETRY_DELAY=500
UPLOAD_RETRY_CUSTOMIZABLE=true
UPLOAD_ENABLE_CIRCUIT_BREAKER=true
UPLOAD_CIRCUIT_BREAKER_THRESHOLD=3
UPLOAD_CIRCUIT_BREAKER_TIMEOUT=30000

# 上传模式配置
UPLOAD_ENABLE_DIRECT=true
UPLOAD_FORCE_SERVER_UPLOAD=false
UPLOAD_CHUNK_SIZE=1048576
UPLOAD_ENABLE_CHUNK_UPLOAD=true
UPLOAD_MAX_CONCURRENT_CHUNKS=2
UPLOAD_AUTO_MODE_THRESHOLD=5242880
UPLOAD_ENABLE_RESUME=true
UPLOAD_DIRECT_SIZE_LIMIT=10485760
UPLOAD_SERVER_SIZE_LIMIT=52428800

# 安全配置
UPLOAD_ENABLE_VIRUS_SCAN=false
UPLOAD_MAX_CONCURRENT_UPLOADS=3
UPLOAD_RATE_LIMIT_PER_USER=20

# 存储配置
UPLOAD_TEMP_DIR=uploads/temp
UPLOAD_CLEANUP_INTERVAL=600000
UPLOAD_MAX_TEMP_FILE_AGE=3600000

# 日志配置
LOG_LEVEL=debug
LOG_FILE_ENABLED=false
LOG_CONSOLE_ENABLED=true

# 测试配置
TEST_TIMEOUT=30000
TEST_PARALLEL=false
MOCK_DATA=true
DISABLE_AUTH=true

# Docker网络配置
DOCKER_NETWORK=wedding-test-network
DOCKER_SUBNET=172.26.0.0/16

# API配置
API_TIMEOUT=10000
API_RATE_LIMIT=500

# Vite配置
VITE_API_URL=http://localhost:3002
VITE_UPLOAD_URL=http://localhost:3002/upload
VITE_MINIO_URL=http://localhost:9002
VITE_APP_TITLE="Wedding Client Test"
VITE_APP_VERSION=1.0.0-test

# 会话配置
SESSION_SECRET=test_session_secret_2025
SESSION_MAX_AGE=3600000

# 缓存配置
CACHE_TTL=60
CACHE_MAX_SIZE=50
CACHE_ENABLED=true

# 时区配置
TZ=Asia/Shanghai