# ========================================
# 生产环境配置文件
# Wedding Client Production Environment
# ========================================

# ========================================
# 服务器基础配置
# ========================================
SERVER_IP=114.132.225.94
INTERNAL_IP=10.1.12.15
SSH_USER=root
SSH_PORT=22
SSH_PASS=your_ssh_password_here

# 部署目录配置
DEPLOY_DIR=$HOME/wedding
REMOTE_DIR=$HOME/wedding
BACKUP_DIR=$HOME/wedding/backups
LOG_DIR=$HOME/wedding/logs
DATA_DIR=$HOME/wedding/data
UPLOADS_DIR=$HOME/wedding/uploads

# ========================================
# 服务端口配置
# ========================================
WEB_PORT=8080
API_PORT=3000
MYSQL_PORT=3306
REDIS_PORT=6379
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001

# ========================================
# 项目基础信息
# ========================================
PROJECT_NAME=wedding
ENVIRONMENT=production
NODE_ENV=production
LOG_LEVEL=info

# ========================================
# 数据库配置 (MySQL)
# ========================================
MYSQL_ROOT_PASSWORD=W3dd1ng_R00t_2024_Pr0d_S3cur3!
MYSQL_DATABASE=wedding_production
MYSQL_USER=wedding_user
MYSQL_PASSWORD=W3dd1ng_Us3r_2024_Pr0d_S3cur3!

# 数据库连接配置
DB_HOST=mysql
DB_PORT=3306
DB_NAME=wedding_production
DB_USER=wedding_user
DB_PASSWORD=W3dd1ng_Us3r_2024_Pr0d_S3cur3!
DATABASE_URL=mysql://wedding_user:W3dd1ng_Us3r_2024_Pr0d_S3cur3!@mysql:3306/wedding_production

# ========================================
# Redis缓存配置
# ========================================
REDIS_PASSWORD=R3d1s_W3dd1ng_2024_Pr0d_S3cur3!
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_URL=redis://:R3d1s_W3dd1ng_2024_Pr0d_S3cur3!@redis:6379

# ========================================
# MinIO对象存储配置
# ========================================
MINIO_ROOT_USER=weddingadmin
MINIO_ROOT_PASSWORD=M1n10_W3dd1ng_2024_Pr0d_S3cur3!
MINIO_BUCKET=wedding-media-prod
MINIO_REGION=us-east-1

# MinIO连接配置
OSS_TYPE=minio
MINIO_ENDPOINT=http://minio:9000
MINIO_ACCESS_KEY=weddingadmin
MINIO_SECRET_KEY=M1n10_W3dd1ng_2024_Pr0d_S3cur3!

# ========================================
# JWT认证配置
# ========================================
JWT_SECRET=JWT_W3dd1ng_S3cr3t_2024_Pr0duct10n_K3y_V3ry_S3cur3_L0ng_Str1ng!
JWT_REFRESH_SECRET=JWT_R3fr3sh_W3dd1ng_S3cr3t_2024_Pr0duct10n_K3y_V3ry_S3cur3!
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# ========================================
# API服务配置
# ========================================
API_HOST=0.0.0.0
API_PORT=3000
API_TIMEOUT=30000
API_RATE_LIMIT=1000
API_CORS_ORIGIN=http://114.132.225.94:8080

# ========================================
# 前端Web配置
# ========================================
VITE_API_URL=http://114.132.225.94:3000/api
VITE_UPLOAD_URL=http://114.132.225.94:3000/files
VITE_MINIO_URL=http://114.132.225.94:9000
VITE_APP_TITLE="Wedding Client"
VITE_APP_VERSION=1.0.0

# ========================================
# Docker镜像配置
# ========================================
WEB_IMAGE=wedding-web
WEB_IMAGE_NAME=wedding-web
SERVER_IMAGE=wedding-server
API_IMAGE_NAME=wedding-server
IMAGE_TAG=latest
API_IMAGE_TAG=latest
WEB_IMAGE_TAG=latest
DOCKER_REGISTRY=ghcr.io/xuanyiying
USE_REGISTRY=true

# Docker构建配置
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1
BUILDKIT_PROGRESS=plain

# ========================================
# 监控和健康检查配置
# ========================================
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=5
HEALTH_CHECK_START_PERIOD=60

# ========================================
# 日志配置
# ========================================
LOG_LEVEL=info
LOG_FORMAT=json
MAX_LOG_FILES=10
MAX_LOG_SIZE=100M
LOG_RETENTION_DAYS=30

# ========================================
# 性能配置
# ========================================
# Node.js性能配置
NODE_OPTIONS=--max-old-space-size=512
UV_THREADPOOL_SIZE=4

# 数据库连接池配置
DB_CONNECTION_LIMIT=20
DB_ACQUIRE_TIMEOUT=60000
DB_TIMEOUT=60000

# Redis连接配置
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000
REDIS_CONNECTION_TIMEOUT=5000

# ========================================
# 安全配置
# ========================================
# CORS配置
CORS_ORIGIN=http://114.132.225.94:8080
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# 安全头配置
SECURITY_HEADERS=true
HSTS_MAX_AGE=31536000
CSP_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: http://114.132.225.94:9000;"

# 速率限制配置
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL=false

# ========================================
# 备份配置
# ========================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=7
BACKUP_COMPRESSION=true

# ========================================
# SSL/TLS配置 (如果使用HTTPS)
# ========================================
SSL_ENABLED=false
SSL_CERT_PATH=/etc/ssl/certs/wedding.crt
SSL_KEY_PATH=/etc/ssl/private/wedding.key
SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt

# ========================================
# 第三方服务配置
# ========================================
# 邮件服务配置 (如果需要)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@wedding.com

# 短信服务配置 (如果需要)
SMS_PROVIDER=
SMS_API_KEY=
SMS_API_SECRET=

# ========================================
# 开发和调试配置
# ========================================
DEBUG=false
VERBOSE_LOGGING=false
ENABLE_PROFILING=false
ENABLE_METRICS=true

# ========================================
# 特性开关
# ========================================
FEATURE_UPLOAD_ENABLED=true
FEATURE_ADMIN_PANEL=true
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_VERIFICATION=false
FEATURE_SMS_VERIFICATION=false

# ========================================
# 缓存配置
# ========================================
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
CACHE_ENABLED=true

# ========================================
# 文件上传配置
# ========================================
UPLOAD_MAX_SIZE=100MB
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,video/mp4,video/avi,video/mov
UPLOAD_PATH=/app/uploads
UPLOAD_TEMP_PATH=/tmp/uploads

# ========================================
# 会话配置
# ========================================
SESSION_SECRET=S3ss10n_W3dd1ng_S3cr3t_2024_Pr0d_V3ry_S3cur3!
SESSION_MAX_AGE=86400000
SESSION_SECURE=false
SESSION_HTTP_ONLY=true

# ========================================
# 时区和本地化配置
# ========================================
TZ=Asia/Shanghai
LANG=zh_CN.UTF-8
LC_ALL=zh_CN.UTF-8
DEFAULT_LOCALE=zh-CN

# ========================================
# 资源限制配置
# ========================================
# MySQL资源限制
MYSQL_MAX_CONNECTIONS=200
MYSQL_INNODB_BUFFER_POOL_SIZE=256M

# Redis资源限制
REDIS_MAX_MEMORY=128mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# API资源限制
API_MAX_REQUEST_SIZE=50mb
API_MAX_CONCURRENT_REQUESTS=100

# ========================================
# 环境标识
# ========================================
DEPLOYMENT_ENV=production
DEPLOYMENT_DATE=
GIT_COMMIT_SHA=
GIT_BRANCH=main
VERSION=1.0.0