# ========================================
# 开发环境专用配置文件
# Wedding Client Development Environment
# ========================================

# ========================================
# 服务器基础配置
# ========================================
SERVER_IP=127.0.0.1
INTERNAL_IP=127.0.0.1
SSH_USER=$(whoami)
SSH_PORT=22

# 部署目录配置
DEPLOY_DIR=/tmp/wedding-dev
REMOTE_DIR=/tmp/wedding-dev
BACKUP_DIR=/tmp/wedding-dev/backups
LOG_DIR=/tmp/wedding-dev/logs
DATA_DIR=/tmp/wedding-dev/data
UPLOADS_DIR=/tmp/wedding-dev/uploads

# ========================================
# 服务端口配置
# ========================================
WEB_PORT=5173
API_PORT=3000
MYSQL_PORT=3306
REDIS_PORT=6379
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001

# ========================================
# 项目基础信息
# ========================================
PROJECT_NAME=wedding
ENVIRONMENT=development
NODE_ENV=development
LOG_LEVEL=debug

# ========================================
# 数据库配置 (MySQL)
# ========================================
MYSQL_ROOT_PASSWORD=root
MYSQL_DATABASE=wedding_dev
MYSQL_USER=wedding_user
MYSQL_PASSWORD=wedding_pass

# 数据库连接配置 (使用容器内部名称)
DB_HOST=localhost
DB_PORT=3306
DB_NAME=wedding_dev
DB_USERNAME=root
DB_PASSWORD=root
DATABASE_URL=mysql://root:root@localhost:3306/wedding_dev

# ========================================
# Redis缓存配置
# ========================================
REDIS_PASSWORD=
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_URL=redis://localhost:6379

# ========================================
# MinIO对象存储配置
# ========================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123
MINIO_BUCKET=wedding-media-dev
MINIO_REGION=us-east-1

# MinIO连接配置 (内部容器访问)
OSS_TYPE=minio
OSS_ENDPOINT=http://localhost:9000
MINIO_ENDPOINT=http://localhost:9000
OSS_ACCESS_KEY=minioadmin
OSS_SECRET_KEY=minioadmin123
OSS_BUCKET=wedding-media-dev
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin123
MINIO_BUCKET_NAME=wedding-media-dev
MINIO_BUCKET=wedding-media-dev

# MinIO外部访问配置
MINIO_PUBLIC_ENDPOINT=http://127.0.0.1:9000
CDN_BASE_URL=http://127.0.0.1:9000

# ========================================
# JWT认证配置
# ========================================
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ========================================
# API服务配置
# ========================================
API_HOST=localhost
API_PORT=3000
API_TIMEOUT=30000
API_RATE_LIMIT=1000
CORS_ORIGIN=http://localhost:5173

# ========================================
# 前端Web配置
# ========================================
VITE_API_URL=http://localhost:3000/api
VITE_UPLOAD_URL=http://localhost:3000/upload
VITE_MINIO_URL=http://localhost:9000
VITE_APP_TITLE="Wedding Client Dev"
VITE_APP_VERSION=1.0.0-dev

# ========================================
# Docker镜像配置
# ========================================
WEB_IMAGE=wedding-web:latest
API_IMAGE=wedding-api:latest
MYSQL_IMAGE=mysql:8.0
REDIS_IMAGE=redis:7-alpine
MINIO_IMAGE=minio/minio:latest
NGINX_IMAGE=nginx:alpine

# 启用镜像拉取
USE_REGISTRY=true
PULL_IMAGES=true

# ========================================
# 监控和健康检查配置
# ========================================
HEALTH_CHECK_INTERVAL=10
HEALTH_CHECK_TIMEOUT=5
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=30

# ========================================
# 日志配置
# ========================================
LOG_LEVEL=debug
LOG_FORMAT=dev
MAX_LOG_FILES=5
MAX_LOG_SIZE=50M
LOG_RETENTION_DAYS=7

# ========================================
# 性能配置
# ========================================
# Node.js性能配置
NODE_OPTIONS=--max-old-space-size=2048
UV_THREADPOOL_SIZE=8

# 数据库连接池配置
DB_CONNECTION_LIMIT=10
DB_ACQUIRE_TIMEOUT=30000
DB_TIMEOUT=30000

# Redis连接配置
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000
REDIS_CONNECTION_TIMEOUT=5000

# ========================================
# 安全配置
# ========================================
# CORS配置
CORS_ORIGIN=http://localhost:5173
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# 安全头配置
SECURITY_HEADERS=false
HSTS_MAX_AGE=0
CSP_POLICY="default-src 'self' 'unsafe-inline' 'unsafe-eval'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;"

# 速率限制配置
RATE_LIMIT_WINDOW=1
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_SKIP_SUCCESSFUL=true

# ========================================
# 备份配置
# ========================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=3
BACKUP_COMPRESSION=true

# ========================================
# SSL/TLS配置
# ========================================
SSL_ENABLED=false

# ========================================
# 第三方服务配置
# ========================================
# 邮件服务配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM="Wedding Club Dev <dev@weddingclub.com>"

# ========================================
# 开发和调试配置
# ========================================
DEBUG=true
VERBOSE_LOGGING=true
ENABLE_PROFILING=false
ENABLE_METRICS=false

# ========================================
# 特性开关
# ========================================
FEATURE_UPLOAD_ENABLED=true
FEATURE_ADMIN_PANEL=true
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_VERIFICATION=false
FEATURE_SMS_VERIFICATION=false

# ========================================
# 缓存配置
# ========================================
CACHE_TTL=300
CACHE_MAX_SIZE=100
CACHE_ENABLED=true

# ========================================
# 文件上传配置
# ========================================
UPLOAD_MAX_SIZE=50MB
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,video/mp4,video/avi,video/mov
UPLOAD_PATH=./uploads
UPLOAD_TEMP_PATH=/tmp/uploads

# ========================================
# 会话配置
# ========================================
SESSION_SECRET=dev-session-secret-change-in-production
SESSION_MAX_AGE=86400000
SESSION_SECURE=false
SESSION_HTTP_ONLY=false

# ========================================
# 时区和本地化配置
# ========================================
TZ=Asia/Shanghai
LANG=en_US.UTF-8
LC_ALL=en_US.UTF-8
DEFAULT_LOCALE=en-US

# ========================================
# 资源限制配置
# ========================================
# MySQL资源限制
MYSQL_MAX_CONNECTIONS=50
MYSQL_INNODB_BUFFER_POOL_SIZE=128M

# Redis资源限制
REDIS_MAX_MEMORY=64mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# API资源限制
API_MAX_REQUEST_SIZE=50mb
API_MAX_CONCURRENT_REQUESTS=50

# ========================================
# 开发环境特定配置
# ========================================
CLOUD_PROVIDER=local
DEPLOYMENT_ENV=development
DEPLOYMENT_DATE=$(date '+%Y-%m-%d %H:%M:%S')
VERSION=1.0.0-dev

# 网络配置
NETWORK_MODE=bridge
DOCKER_NETWORK_NAME=wedding-dev-net

# 容器重启策略
RESTART_POLICY=always

# 容器健康检查
HEALTHCHECK_ENABLED=true