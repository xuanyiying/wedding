# 腾讯云服务器部署检查清单

## 📋 部署前检查

### 服务器要求
- [ ] 腾讯云服务器已创建并可正常访问
- [ ] 服务器配置：最低 2核4G内存，推荐 4核8G内存
- [ ] 硬盘空间：最低 40GB，推荐 100GB SSD
- [ ] 操作系统：Ubuntu 18.04+ 或 CentOS 7+

### 网络配置
- [ ] 服务器已分配公网 IP
- [ ] 安全组已开放以下端口：
  - [ ] 22 (SSH)
  - [ ] 80 (HTTP)
  - [ ] 443 (HTTPS)
  - [ ] 3000 (Web 开发服务)
  - [ ] 8000 (API 服务)
  - [ ] 9001 (MinIO 控制台)

### 域名配置（可选）
- [ ] 域名已购买并完成备案
- [ ] DNS 解析已配置指向服务器 IP
- [ ] SSL 证书准备就绪（或使用 Let's Encrypt 自动申请）

## 🚀 部署步骤

### 1. 连接服务器
```bash
# 使用 SSH 连接服务器
ssh root@your-server-ip

# 或使用密钥文件
ssh -i your-key.pem root@your-server-ip
```
- [ ] 成功连接到服务器
- [ ] 确认具有 root 权限或 sudo 权限

### 2. 克隆项目
```bash
# 克隆项目代码
git clone <your-repository-url>
cd wedding-client
```
- [ ] 项目代码已成功克隆
- [ ] 进入项目目录

### 3. 选择部署方式

**方式一：快速部署（推荐新手）**
```bash
sudo ./quick-deploy.sh
```
- [ ] 脚本执行完成无错误
- [ ] 所有服务启动成功

**方式二：完整部署**
```bash
./deploy.sh
```
- [ ] 脚本执行完成无错误
- [ ] 所有服务启动成功

## ✅ 部署后验证

### 服务状态检查
```bash
# 检查服务状态
docker-compose ps
```
- [ ] 所有服务状态为 "Up"
- [ ] 没有服务显示 "Exit" 或错误状态

### 端口连通性测试
```bash
# 测试端口是否开放
telnet your-server-ip 80
telnet your-server-ip 8000
telnet your-server-ip 9001
```
- [ ] 端口 80 可访问
- [ ] 端口 8000 可访问
- [ ] 端口 9001 可访问

### 应用访问测试
- [ ] Web 应用可正常访问：`http://your-server-ip`
- [ ] API 服务响应正常：`http://your-server-ip:8000/api/health`
- [ ] MinIO 控制台可访问：`http://your-server-ip:9001`

### 功能测试
- [ ] 用户注册功能正常
- [ ] 用户登录功能正常
- [ ] 文件上传功能正常
- [ ] 数据库连接正常
- [ ] 缓存服务正常

## 🔧 故障排除

### 常见问题检查

**服务无法启动**
```bash
# 查看服务日志
docker-compose logs [service-name]

# 查看系统资源
free -h
df -h
```
- [ ] 检查内存使用情况
- [ ] 检查磁盘空间
- [ ] 查看错误日志

**端口访问失败**
```bash
# 检查防火墙状态
sudo ufw status  # Ubuntu
sudo firewall-cmd --list-all  # CentOS

# 检查端口占用
sudo netstat -tuln | grep :80
```
- [ ] 防火墙规则正确
- [ ] 端口未被其他服务占用
- [ ] 安全组配置正确

**数据库连接失败**
```bash
# 检查 MySQL 服务
docker-compose logs mysql

# 测试数据库连接
docker-compose exec mysql mysql -u wedding -p
```
- [ ] MySQL 服务正常运行
- [ ] 数据库用户权限正确
- [ ] 环境变量配置正确

## 🔒 安全配置检查

### 密码安全
- [ ] 已修改数据库默认密码
- [ ] 已修改 MinIO 默认密钥
- [ ] 已设置强 JWT 密钥
- [ ] 已修改服务器 root 密码

### 网络安全
- [ ] 防火墙已启用
- [ ] 仅开放必要端口
- [ ] SSH 密钥认证已配置（推荐）
- [ ] 禁用 root 密码登录（推荐）

### 应用安全
- [ ] CORS 策略配置正确
- [ ] API 接口有适当的权限控制
- [ ] 文件上传有大小和类型限制
- [ ] 敏感信息不在日志中暴露

## 📊 性能优化检查

### 系统优化
- [ ] 已配置 swap 分区（如内存不足）
- [ ] 已优化 MySQL 配置
- [ ] 已配置 Redis 内存限制
- [ ] 已设置日志轮转

### 监控配置
- [ ] 已设置系统监控
- [ ] 已配置日志收集
- [ ] 已设置备份策略
- [ ] 已配置告警通知

## 📝 部署完成确认

### 最终检查
- [ ] 所有服务正常运行
- [ ] 应用功能测试通过
- [ ] 安全配置已完成
- [ ] 备份策略已实施
- [ ] 监控系统已配置
- [ ] 文档已更新

### 交付清单
- [ ] 服务器访问信息
- [ ] 应用访问地址
- [ ] 管理员账号信息
- [ ] 数据库连接信息
- [ ] 备份恢复说明
- [ ] 运维操作手册

---

**部署完成！** 🎉

如有问题，请参考 [部署指南](./DEPLOYMENT_GUIDE.md) 或联系技术支持。